<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of gridInspector</title>
  <meta name="keywords" content="gridInspector">
  <meta name="description" content="gridInspector MATLAB code for gridInspector.fig">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">src</a> &gt; gridInspector.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for src&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>gridInspector
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>gridInspector MATLAB code for gridInspector.fig</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = gridInspector(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> gridInspector MATLAB code for gridInspector.fig

%--------------------------------------------------------------------------------------------------
      @desc gridInspector, by itself, creates a new gridInspector or raises the existing
      singleton*.

      H = GRIDINSPECTOR returns the handle to a new GRIDINSPECTOR or the handle to
      the existing singleton*.

      GRIDINSPECTOR('CALLBACK',hObject,eventData,handles,...) calls the local
      function named CALLBACK in GRIDINSPECTOR.M with the given input arguments.

      GRIDINSPECTOR('Property','Value',...) creates a new GRIDINSPECTOR or raises the
      existing singleton*.  Starting from the left, property value pairs are
      applied to the GUI before gridInspector_OpeningFcn gets called.  An
      unrecognized property name or invalid value makes property application
      stop.  All inputs are passed to gridInspector_OpeningFcn via varargin.

      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one
      instance to run (singleton)&quot;.

%--------------------------------------------------------------------------------------------------
   The inputs for this function are:

   - @iparam [var] varargin: variable number of input arguments. Not Used.

%--------------------------------------------------------------------------------------------------
   The outputs of this function are:

   - @oparam [var] varargout: variable number of output arguments. Not Used.

%--------------------------------------------------------------------------------------------------
   ** @author Andrés Ferreiro González (@aferreiro)
   ** @company Galician Research And Development Center In Advanced Telecommunications (GRADIANT)
   ** @date 13/03/2017
   ** @version 2.5
%--------------------------------------------------------------------------------------------------
%%-------------------------------------------------------------------------------------------------</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="dumpToFile.html" class="code" title="function dumpToFile( log )">dumpToFile</a>	dumpToFile dumps the console log into a .txt file.</li><li><a href="exportKML.html" class="code" title="function exportKML( log, PathName, FileName, results, openMap )">exportKML</a>	exportKML dumps the resulting grid in a kml file.</li><li><a href="importCameras.html" class="code" title="function [ cameras, status ] = importCameras( log, path )">importCameras</a>	importCameras imports all the camera objects found in 'path'.</li><li><a href="importPolygon.html" class="code" title="function [ polygon, status ] = importPolygon( log, Path )">importPolygon</a>	importPolygon gets polygon boundaries from the file specified in path.</li><li><a href="onComputeClick.html" class="code" title="function [ results ] = onComputeClick( log, display, inputs, polygon, camerasSet )">onComputeClick</a>	onComputeClick executes the callback for the compute button in the GridInspector GUI.</li><li><a href="resetAll.html" class="code" title="function [ status, handles ] = resetAll( handles, varargin )">resetAll</a>	resetAll clears all elements in GridInspector Window.</li><li><a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>	updateLog updates the console log in the GridInspector Window.</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function gridInspector_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = gridInspector_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function logRes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function logRes_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function loadPoly_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function selCamera_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function selCamera_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function cameraPos_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function cameraPos_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function overlap_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function overlap_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function sidelap_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function sidelap_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function detSize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function detSize_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function nPx_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function nPx_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function compute_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function resetAll_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function exportGrid_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function plotPolygon_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function plotGrid_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function plotStart_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function plotOuterBox_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function startPos_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function startPos_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function plotOGrid_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function leg_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function resLog_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function logDump_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function plotBBox_Callback(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = gridInspector(varargin)</a>
0002 <span class="comment">% gridInspector MATLAB code for gridInspector.fig</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%%--------------------------------------------------------------------------------------------------</span>
0005 <span class="comment">%      @desc gridInspector, by itself, creates a new gridInspector or raises the existing</span>
0006 <span class="comment">%      singleton*.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%      H = GRIDINSPECTOR returns the handle to a new GRIDINSPECTOR or the handle to</span>
0009 <span class="comment">%      the existing singleton*.</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%      GRIDINSPECTOR('CALLBACK',hObject,eventData,handles,...) calls the local</span>
0012 <span class="comment">%      function named CALLBACK in GRIDINSPECTOR.M with the given input arguments.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">%      GRIDINSPECTOR('Property','Value',...) creates a new GRIDINSPECTOR or raises the</span>
0015 <span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
0016 <span class="comment">%      applied to the GUI before gridInspector_OpeningFcn gets called.  An</span>
0017 <span class="comment">%      unrecognized property name or invalid value makes property application</span>
0018 <span class="comment">%      stop.  All inputs are passed to gridInspector_OpeningFcn via varargin.</span>
0019 <span class="comment">%</span>
0020 <span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one</span>
0021 <span class="comment">%      instance to run (singleton)&quot;.</span>
0022 <span class="comment">%</span>
0023 <span class="comment">%%--------------------------------------------------------------------------------------------------</span>
0024 <span class="comment">%   The inputs for this function are:</span>
0025 <span class="comment">%</span>
0026 <span class="comment">%   - @iparam [var] varargin: variable number of input arguments. Not Used.</span>
0027 <span class="comment">%</span>
0028 <span class="comment">%%--------------------------------------------------------------------------------------------------</span>
0029 <span class="comment">%   The outputs of this function are:</span>
0030 <span class="comment">%</span>
0031 <span class="comment">%   - @oparam [var] varargout: variable number of output arguments. Not Used.</span>
0032 <span class="comment">%</span>
0033 <span class="comment">%%--------------------------------------------------------------------------------------------------</span>
0034 <span class="comment">%   ** @author Andrés Ferreiro González (@aferreiro)</span>
0035 <span class="comment">%   ** @company Galician Research And Development Center In Advanced Telecommunications (GRADIANT)</span>
0036 <span class="comment">%   ** @date 13/03/2017</span>
0037 <span class="comment">%   ** @version 2.5</span>
0038 <span class="comment">%%--------------------------------------------------------------------------------------------------</span>
0039 <span class="comment">%%%-------------------------------------------------------------------------------------------------</span>
0040 
0041 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0042 gui_Singleton = 1;
0043 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0044                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0045                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction gridInspector_OpeningFcn(hObject, eventdata, handles, varargin)">gridInspector_OpeningFcn</a>, <span class="keyword">...</span>
0046                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = gridInspector_OutputFcn(hObject, eventdata, handles)">gridInspector_OutputFcn</a>, <span class="keyword">...</span>
0047                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0048                    <span class="string">'gui_Callback'</span>,   []);
0049 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0050     gui_State.gui_Callback = str2func(varargin{1});
0051 <span class="keyword">end</span>
0052 
0053 <span class="keyword">if</span> nargout
0054     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0055 <span class="keyword">else</span>
0056     gui_mainfcn(gui_State, varargin{:});
0057 <span class="keyword">end</span>
0058 <span class="comment">% End initialization code - DO NOT EDIT</span>
0059 
0060 
0061 <span class="comment">% --- Executes just before gridInspector is made visible.</span>
0062 <a name="_sub1" href="#_subfunctions" class="code">function gridInspector_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0063 <span class="comment">% This function has no output args, see OutputFcn.</span>
0064 <span class="comment">% hObject    handle to figure</span>
0065 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0066 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0067 <span class="comment">% varargin   command line arguments to gridInspector (see VARARGIN)</span>
0068 
0069 <span class="comment">% Choose default command line output for mainWindow</span>
0070 handles.output = hObject;
0071 
0072 <span class="comment">% Update handles structure</span>
0073 guidata(hObject, handles);
0074 
0075 <span class="comment">% UIWAIT makes mainWindow wait for user response (see UIRESUME)</span>
0076 <span class="comment">% uiwait(handles.main);</span>
0077 
0078 screensize = get(0,<span class="string">'ScreenSize'</span>);
0079 
0080 sz(1) = ceil(screensize(3)*2/3);
0081 sz(2) = ceil(screensize(4)*4/5);
0082 
0083 xpos = ceil((screensize(3)-sz(1))/2); <span class="comment">% center the figure on the screen horizontally</span>
0084 ypos = ceil((screensize(4)-sz(2))/2); <span class="comment">% center the figure on the screen vertically</span>
0085 
0086 set(gcf, <span class="string">'Units'</span>, <span class="string">'Pixels'</span>, <span class="string">'Position'</span>, [xpos ypos sz(1) sz(2)])
0087 
0088 <span class="comment">% Cargamos logo proyecto</span>
0089 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0090 axes(handles.logo)  
0091 cla(handles.logo)
0092 hold(handles.logo,<span class="string">'on'</span>)
0093 
0094 [A, map, alpha] = imread(<span class="string">'./Icons/logo_POLARYS.png'</span>);
0095 h = imshow(A, map);
0096 
0097 set(h, <span class="string">'AlphaData'</span>, alpha);
0098 hold(handles.logo,<span class="string">'off'</span>)
0099 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0100 
0101  axes(handles.pltRes);
0102  box off
0103  grid off
0104  axis off
0105 
0106  [cameras, status] = <a href="importCameras.html" class="code" title="function [ cameras, status ] = importCameras( log, path )">importCameras</a>(handles.logRes, <span class="string">'./Archives/'</span>);
0107 
0108 <span class="keyword">if</span> status ~= 1 
0109     
0110     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------FATAL ERROR------: Error happened while trying to load cameras to window'</span>);
0111     errordlg(<span class="string">'Unexpected error while trying to load cameras'</span>, <span class="string">'ERROR'</span>, <span class="string">'modal'</span>);
0112     
0113 <span class="keyword">else</span>
0114    
0115     str = <span class="string">''</span>;
0116     <span class="keyword">for</span> ll = 1 : numel(cameras)
0117         
0118         str = sprintf(<span class="string">'%s\n%s'</span>, str, cameras(ll).model);
0119     <span class="keyword">end</span>
0120     set(handles.selCamera,<span class="string">'String'</span>, deblank(str))
0121 <span class="keyword">end</span>
0122 
0123 handles.results = struct([]);
0124 handles.polygon = [];
0125 handles.statusPoly = -1;
0126 handles.cameras = cameras;
0127 guidata(hObject, handles);
0128  
0129 
0130 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0131 <a name="_sub2" href="#_subfunctions" class="code">function varargout = gridInspector_OutputFcn(hObject, eventdata, handles) </a>
0132 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0133 <span class="comment">% hObject    handle to figure</span>
0134 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0135 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0136 
0137 <span class="comment">% Get default command line output from handles structure</span>
0138 varargout{1} = handles.output;
0139 
0140 
0141 
0142 <a name="_sub3" href="#_subfunctions" class="code">function logRes_Callback(hObject, eventdata, handles)</a>
0143 <span class="comment">% hObject    handle to logRes (see GCBO)</span>
0144 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0145 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0146 
0147 <span class="comment">% Hints: get(hObject,'String') returns contents of logRes as text</span>
0148 <span class="comment">%        str2double(get(hObject,'String')) returns contents of logRes as a double</span>
0149 
0150 
0151 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0152 <a name="_sub4" href="#_subfunctions" class="code">function logRes_CreateFcn(hObject, eventdata, handles)</a>
0153 <span class="comment">% hObject    handle to logRes (see GCBO)</span>
0154 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0155 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0156 
0157 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0158 <span class="comment">%       See ISPC and COMPUTER.</span>
0159 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0160     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0161 <span class="keyword">end</span>
0162 
0163 
0164 <span class="comment">% --- Executes on button press in loadPoly.</span>
0165 <a name="_sub5" href="#_subfunctions" class="code">function loadPoly_Callback(hObject, eventdata, handles)</a>
0166 <span class="comment">% hObject    handle to loadPoly (see GCBO)</span>
0167 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0168 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0169 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">'Busy...'</span>);
0170 pause(0.0005) 
0171 <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------EVENT------ Load Polygon ongoing'</span>, 0);
0172 [FileName,PathName] = uigetfile({<span class="string">'*.poly'</span>,<span class="string">'Mission Planner Polygon Files'</span>;<span class="string">'*.KML'</span>, <span class="keyword">...</span>
0173     <span class="string">'Keyhole Markup Language (KML) Files'</span>;<span class="string">'*'</span>, <span class="string">'All files'</span>},<span class="string">'Select the polygon file'</span>);
0174 
0175 <span class="keyword">if</span> ~isequal(FileName,0) &amp;&amp; ~isequal(PathName,0)
0176     
0177     set(handles.selectedPolygonLabel,<span class="string">'String'</span>,strcat(PathName,FileName));    
0178     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Selected file: ''%s'''</span>, strcat(PathName,FileName)), 0);
0179     [ polygon, statusPoly ] = <a href="importPolygon.html" class="code" title="function [ polygon, status ] = importPolygon( log, Path )">importPolygon</a>( handles.logRes, strcat(PathName,FileName) );
0180 
0181     <span class="keyword">if</span> statusPoly ~= 1
0182     
0183         errordlg(<span class="string">'Something happened while tying to load polygon file. Please check console log'</span>,<span class="string">'ERROR'</span>);
0184         set(handles.selectedPolygonLabel,<span class="string">'String'</span>,<span class="string">''</span>);  
0185         <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------FATAL ERROR------ Polygon not loaded, see console log for more information'</span>, 0);
0186     <span class="keyword">else</span>
0187        
0188         <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------EVENT------ Polygon load finished'</span>, 0);
0189     <span class="keyword">end</span>
0190     
0191     handles.statusPoly = statusPoly;
0192     handles.polygon = polygon;
0193     
0194     <span class="comment">% Update handles structure</span>
0195     guidata(hObject, handles);
0196 
0197 <span class="keyword">else</span>
0198    
0199     set(handles.selectedPolygonLabel,<span class="string">'String'</span>,<span class="string">''</span>);    
0200     handles.statusPoly = -1;
0201     handles.polygon = [];
0202     <span class="comment">% Update handles structure</span>
0203     guidata(hObject, handles);
0204     
0205 <span class="keyword">end</span>
0206 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">''</span>);
0207 
0208 <span class="comment">% --- Executes on selection change in selCamera.</span>
0209 <a name="_sub6" href="#_subfunctions" class="code">function selCamera_Callback(hObject, eventdata, handles)</a>
0210 <span class="comment">% hObject    handle to selCamera (see GCBO)</span>
0211 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0212 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0213 
0214 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns selCamera contents as cell array</span>
0215 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from selCamera</span>
0216 
0217 val = get(handles.selCamera, <span class="string">'Value'</span>);
0218 
0219 <span class="keyword">if</span> val ~= 1
0220    
0221     val = val - 1;
0222     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'------EVENT------ Selected camera (%s) parameters:'</span>, handles.cameras(val).model), 0);
0223     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Focal Length: %2.2f [mm]'</span>, handles.cameras(val).focallen), 1);
0224     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Image width: %i [px]'</span>, handles.cameras(val).imwidth), 1);
0225     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Image height: %i [px]'</span>, handles.cameras(val).imheight), 1);    
0226     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Sensor width: %2.2f [mm]'</span>, handles.cameras(val).sensorwidth), 1);
0227     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, sprintf(<span class="string">'Sensor height: %2.2f [px]'</span>, handles.cameras(val).sensorheight), 0);    
0228 
0229 <span class="keyword">end</span>
0230 
0231 
0232 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0233 <a name="_sub7" href="#_subfunctions" class="code">function selCamera_CreateFcn(hObject, eventdata, handles)</a>
0234 <span class="comment">% hObject    handle to selCamera (see GCBO)</span>
0235 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0236 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0237 
0238 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0239 <span class="comment">%       See ISPC and COMPUTER.</span>
0240 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0241     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0242 <span class="keyword">end</span>
0243 
0244 
0245 <span class="comment">% --- Executes on selection change in cameraPos.</span>
0246 <a name="_sub8" href="#_subfunctions" class="code">function cameraPos_Callback(hObject, eventdata, handles)</a>
0247 <span class="comment">% hObject    handle to cameraPos (see GCBO)</span>
0248 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0249 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0250 
0251 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns cameraPos contents as cell array</span>
0252 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from cameraPos</span>
0253 
0254 
0255 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0256 <a name="_sub9" href="#_subfunctions" class="code">function cameraPos_CreateFcn(hObject, eventdata, handles)</a>
0257 <span class="comment">% hObject    handle to cameraPos (see GCBO)</span>
0258 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0259 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0260 
0261 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0262 <span class="comment">%       See ISPC and COMPUTER.</span>
0263 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0264     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0265 <span class="keyword">end</span>
0266 
0267 
0268 
0269 <a name="_sub10" href="#_subfunctions" class="code">function overlap_Callback(hObject, eventdata, handles)</a>
0270 <span class="comment">% hObject    handle to overlap (see GCBO)</span>
0271 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0272 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0273 
0274 <span class="comment">% Hints: get(hObject,'String') returns contents of overlap as text</span>
0275 <span class="comment">%        str2double(get(hObject,'String')) returns contents of overlap as a double</span>
0276 percent = round(get(handles.overlap,<span class="string">'Value'</span>));
0277 set(handles.overlapLabel, <span class="string">'String'</span>, sprintf(<span class="string">'(%i%%)'</span>, percent))
0278 
0279 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0280 <a name="_sub11" href="#_subfunctions" class="code">function overlap_CreateFcn(hObject, eventdata, handles)</a>
0281 <span class="comment">% hObject    handle to overlap (see GCBO)</span>
0282 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0283 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0284 
0285 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0286 <span class="comment">%       See ISPC and COMPUTER.</span>
0287 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0288     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0289 <span class="keyword">end</span>
0290 
0291 
0292 
0293 <a name="_sub12" href="#_subfunctions" class="code">function sidelap_Callback(hObject, eventdata, handles)</a>
0294 <span class="comment">% hObject    handle to sidelap (see GCBO)</span>
0295 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0296 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0297 
0298 <span class="comment">% Hints: get(hObject,'String') returns contents of sidelap as text</span>
0299 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sidelap as a double</span>
0300 percent = round(get(handles.sidelap,<span class="string">'Value'</span>));
0301 set(handles.sidelapLabel, <span class="string">'String'</span>, sprintf(<span class="string">'(%i%%)'</span>, percent))
0302 
0303 
0304 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0305 <a name="_sub13" href="#_subfunctions" class="code">function sidelap_CreateFcn(hObject, eventdata, handles)</a>
0306 <span class="comment">% hObject    handle to sidelap (see GCBO)</span>
0307 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0308 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0309 
0310 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0311 <span class="comment">%       See ISPC and COMPUTER.</span>
0312 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0313     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0314 <span class="keyword">end</span>
0315 
0316 
0317 
0318 <a name="_sub14" href="#_subfunctions" class="code">function detSize_Callback(hObject, eventdata, handles)</a>
0319 <span class="comment">% hObject    handle to detSize (see GCBO)</span>
0320 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0321 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0322 
0323 <span class="comment">% Hints: get(hObject,'String') returns contents of detSize as text</span>
0324 <span class="comment">%        str2double(get(hObject,'String')) returns contents of detSize as a double</span>
0325 
0326 
0327 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0328 <a name="_sub15" href="#_subfunctions" class="code">function detSize_CreateFcn(hObject, eventdata, handles)</a>
0329 <span class="comment">% hObject    handle to detSize (see GCBO)</span>
0330 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0331 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0332 
0333 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0334 <span class="comment">%       See ISPC and COMPUTER.</span>
0335 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0336     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0337 <span class="keyword">end</span>
0338 
0339 
0340 
0341 <a name="_sub16" href="#_subfunctions" class="code">function nPx_Callback(hObject, eventdata, handles)</a>
0342 <span class="comment">% hObject    handle to nPx (see GCBO)</span>
0343 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0344 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0345 <span class="comment">% Hints: get(hObject,'String') returns contents of nPx as text</span>
0346 <span class="comment">%        str2double(get(hObject,'String')) returns contents of nPx as a double</span>
0347 
0348 
0349 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0350 <a name="_sub17" href="#_subfunctions" class="code">function nPx_CreateFcn(hObject, eventdata, handles)</a>
0351 <span class="comment">% hObject    handle to nPx (see GCBO)</span>
0352 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0353 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0354 
0355 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0356 <span class="comment">%       See ISPC and COMPUTER.</span>
0357 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0358     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0359 <span class="keyword">end</span>
0360 
0361 
0362 <span class="comment">% --- Executes on button press in compute.</span>
0363 <a name="_sub18" href="#_subfunctions" class="code">function compute_Callback(hObject, eventdata, handles)</a>
0364 <span class="comment">% hObject    handle to compute (see GCBO)</span>
0365 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0366 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0367 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">'Busy...'</span>);
0368 pause(0.0005) 
0369 
0370 inputs = struct(<span class="string">'selCamera'</span>, get(handles.selCamera,<span class="string">'Value'</span>), <span class="string">'cameraPos'</span>, <span class="keyword">...</span>
0371     get(handles.cameraPos,<span class="string">'Value'</span>), <span class="string">'overlap'</span>, round(get(handles.overlap,<span class="string">'Value'</span>)), <span class="keyword">...</span>
0372     <span class="string">'sidelap'</span>, round(get(handles.sidelap,<span class="string">'Value'</span>)), <span class="string">'detSize'</span>, str2double(get(handles.detSize,<span class="string">'String'</span>)), <span class="keyword">...</span>
0373     <span class="string">'nPx'</span>, str2double(get(handles.nPx,<span class="string">'String'</span>)), <span class="string">'startPos'</span>, get(handles.startPos,<span class="string">'Value'</span>));
0374 
0375 <span class="keyword">if</span> handles.statusPoly ~= 1
0376   
0377     errordlg(<span class="string">'Please, import a valid polygon file before updating grid'</span>,<span class="string">'ERROR'</span>, <span class="string">'modal'</span>);
0378     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------FATAL ERROR------ Polygon not loaded, check console log for more info'</span>, 0);
0379 
0380 <span class="keyword">else</span>
0381     
0382     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------EVENT------ Starting grid computing'</span>,0);
0383     
0384     display.plot = handles.pltRes;
0385     display.pol = handles.plotPolygon;
0386     display.bbox = handles.plotBBox;
0387     display.grid = handles.plotGrid;
0388     display.obox = handles.plotOuterBox;
0389     display.ogrid = handles.plotOGrid;
0390     display.start = handles.plotStart;
0391     
0392     [ results ] = <a href="onComputeClick.html" class="code" title="function [ results ] = onComputeClick( log, display, inputs, polygon, camerasSet )">onComputeClick</a>( handles.logRes, display, inputs, handles.polygon, handles.cameras );
0393     handles.results = results;
0394     <span class="comment">% Update handles structure</span>
0395     guidata(hObject, handles);    
0396 <span class="keyword">end</span>
0397 
0398 <span class="keyword">if</span> ~isempty(handles.results)
0399     
0400     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------EVENT------ Grid Computation process finished'</span>,0);
0401 <span class="keyword">else</span>
0402     <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------FATAL ERROR------ Grid not computed, check console log for more info'</span>, 0); 
0403 <span class="keyword">end</span>
0404 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">''</span>);
0405 pause(0.0005) 
0406 
0407 
0408 <span class="comment">% --- Executes on button press in resetAll.</span>
0409 <a name="_sub19" href="#_subfunctions" class="code">function resetAll_Callback(hObject, eventdata, handles)</a>
0410 <span class="comment">% hObject    handle to resetAll (see GCBO)</span>
0411 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0412 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0413 [status, handles] = <a href="resetAll.html" class="code" title="function [ status, handles ] = resetAll( handles, varargin )">resetAll</a>(handles);
0414 
0415 <span class="comment">% Update handles structure</span>
0416 guidata(hObject, handles);
0417 
0418 <span class="keyword">if</span> status ~=1
0419     
0420    <a href="updateLog.html" class="code" title="function updateLog( log, strin, multiline )">updateLog</a>(handles.logRes, <span class="string">'------FATAL ERROR------ Unexpected error during reset. Try again later.'</span>);
0421 <span class="keyword">end</span>
0422     
0423 
0424 
0425 <span class="comment">% --- Executes on button press in exportGrid.</span>
0426 <a name="_sub20" href="#_subfunctions" class="code">function exportGrid_Callback(hObject, eventdata, handles)</a>
0427 <span class="comment">% hObject    handle to exportGrid (see GCBO)</span>
0428 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0429 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0430 
0431 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">'Busy'</span>);
0432 pause(0.0005) 
0433 
0434 [FileName, PathName] = uiputfile(<span class="string">'*.kml'</span>, <span class="string">'Save As...'</span>);
0435 
0436 
0437 <span class="keyword">if</span> ~isequal(FileName,0) &amp;&amp; ~isequal(PathName,0) &amp;&amp; ~isempty(handles.results)
0438     
0439     <a href="exportKML.html" class="code" title="function exportKML( log, PathName, FileName, results, openMap )">exportKML</a>( handles.logRes, PathName, FileName, handles.results,1 );
0440 <span class="keyword">end</span>
0441 
0442 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">''</span>);
0443 pause(0.0005) 
0444 
0445 
0446 <span class="comment">% --- Executes on button press in plotPolygon.</span>
0447 <a name="_sub21" href="#_subfunctions" class="code">function plotPolygon_Callback(hObject, eventdata, handles)</a>
0448 <span class="comment">% hObject    handle to plotPolygon (see GCBO)</span>
0449 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0450 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0451 
0452 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotPolygon</span>
0453 
0454 stat = get(handles.plotPolygon,<span class="string">'Value'</span>);
0455 
0456 <span class="keyword">switch</span>(stat)
0457     
0458     <span class="keyword">case</span> 0
0459         
0460         <span class="keyword">if</span> ~isempty(handles.results)
0461            
0462             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'on'</span>)
0463                 
0464                 handles.results.handGraphics.hPoly.Visible = <span class="string">'off'</span>;
0465             <span class="keyword">end</span>
0466         <span class="keyword">end</span>
0467         
0468     <span class="keyword">case</span> 1
0469         
0470         <span class="keyword">if</span> ~isempty(handles.results)
0471            
0472             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>)
0473                 
0474                 handles.results.handGraphics.hPoly.Visible = <span class="string">'on'</span>;
0475             <span class="keyword">end</span>
0476         <span class="keyword">end</span>        
0477 <span class="keyword">end</span>
0478 
0479 <span class="keyword">if</span> ~isempty(handles.results)
0480     
0481     hold(handles.pltRes,<span class="string">'on'</span>)
0482 
0483     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0484             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0485             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0486             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0487             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0488             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0489 
0490             axis off
0491             box off
0492             grid off        
0493             legend HIDE
0494             set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0495     <span class="keyword">else</span>
0496 
0497          axis on   
0498          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0499          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0500     <span class="keyword">end</span>
0501 
0502     hold(handles.pltRes,<span class="string">'off'</span>)
0503 
0504     <span class="comment">% Update handles structure</span>
0505     guidata(hObject, handles);
0506 <span class="keyword">end</span>
0507 
0508 <span class="comment">% --- Executes on button press in plotGrid.</span>
0509 <a name="_sub22" href="#_subfunctions" class="code">function plotGrid_Callback(hObject, eventdata, handles)</a>
0510 <span class="comment">% hObject    handle to plotGrid (see GCBO)</span>
0511 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0512 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0513 
0514 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotGrid</span>
0515 
0516 stat = get(handles.plotGrid,<span class="string">'Value'</span>);
0517 
0518 <span class="keyword">switch</span>(stat)
0519     
0520     <span class="keyword">case</span> 0
0521         
0522         <span class="keyword">if</span> ~isempty(handles.results)
0523            
0524             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'on'</span>)
0525                 
0526                 handles.results.handGraphics.hGrid.Visible = <span class="string">'off'</span>;
0527             <span class="keyword">end</span>
0528         <span class="keyword">end</span>
0529         
0530     <span class="keyword">case</span> 1
0531         
0532         <span class="keyword">if</span> ~isempty(handles.results)
0533            
0534             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>)
0535                 
0536                 handles.results.handGraphics.hGrid.Visible = <span class="string">'on'</span>;
0537             <span class="keyword">end</span>
0538         <span class="keyword">end</span>        
0539 <span class="keyword">end</span>
0540 
0541 
0542 <span class="keyword">if</span> ~isempty(handles.results)
0543     
0544     hold(handles.pltRes,<span class="string">'on'</span>)
0545 
0546     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0547             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0548             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0549             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0550             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0551             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0552 
0553             axis off
0554             box off
0555             grid off        
0556             legend HIDE
0557             set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0558     <span class="keyword">else</span>
0559 
0560          axis on   
0561          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0562          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0563     <span class="keyword">end</span>
0564 
0565     hold(handles.pltRes,<span class="string">'off'</span>)
0566 
0567     <span class="comment">% Update handles structure</span>
0568     guidata(hObject, handles);
0569 <span class="keyword">end</span>
0570 
0571 <span class="comment">% --- Executes on button press in plotStart.</span>
0572 <a name="_sub23" href="#_subfunctions" class="code">function plotStart_Callback(hObject, eventdata, handles)</a>
0573 <span class="comment">% hObject    handle to plotStart (see GCBO)</span>
0574 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0575 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0576 
0577 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotStart</span>
0578 
0579 stat = get(handles.plotStart,<span class="string">'Value'</span>);
0580 
0581 <span class="keyword">switch</span>(stat)
0582     
0583     <span class="keyword">case</span> 0
0584         
0585         <span class="keyword">if</span> ~isempty(handles.results)
0586            
0587             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'on'</span>)
0588                 
0589                 handles.results.handGraphics.hStart.Visible = <span class="string">'off'</span>;
0590             <span class="keyword">end</span>
0591         <span class="keyword">end</span>
0592         
0593     <span class="keyword">case</span> 1
0594         
0595         <span class="keyword">if</span> ~isempty(handles.results)
0596            
0597             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>)
0598                 
0599                 handles.results.handGraphics.hStart.Visible = <span class="string">'on'</span>;
0600             <span class="keyword">end</span>
0601         <span class="keyword">end</span>        
0602 <span class="keyword">end</span>
0603 
0604 
0605 <span class="keyword">if</span> ~isempty(handles.results)
0606     
0607     hold(handles.pltRes,<span class="string">'on'</span>)
0608 
0609     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0610             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0611             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0612             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0613             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0614             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0615 
0616             axis off
0617             box off
0618             grid off        
0619             legend HIDE
0620             set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0621     <span class="keyword">else</span>
0622 
0623          axis on   
0624          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0625          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0626     <span class="keyword">end</span>
0627 
0628     hold(handles.pltRes,<span class="string">'off'</span>)
0629 
0630     <span class="comment">% Update handles structure</span>
0631     guidata(hObject, handles);
0632 <span class="keyword">end</span>
0633 
0634 
0635 <span class="comment">% --- Executes on button press in plotOuterBox.</span>
0636 <a name="_sub24" href="#_subfunctions" class="code">function plotOuterBox_Callback(hObject, eventdata, handles)</a>
0637 <span class="comment">% hObject    handle to plotOuterBox (see GCBO)</span>
0638 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0639 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0640 
0641 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotOuterBox</span>
0642 
0643 stat = get(handles.plotOuterBox,<span class="string">'Value'</span>);
0644 
0645 <span class="keyword">switch</span>(stat)
0646     
0647     <span class="keyword">case</span> 0
0648         
0649         <span class="keyword">if</span> ~isempty(handles.results)
0650            
0651             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'on'</span>)
0652                 
0653                 
0654                 <span class="keyword">for</span> ll = 1 : length(handles.results.handGraphics.hOutBox)
0655                     
0656                     handles.results.handGraphics.hOutBox(ll).Visible = <span class="string">'off'</span>;
0657                 <span class="keyword">end</span>
0658             <span class="keyword">end</span>
0659         <span class="keyword">end</span>
0660         
0661     <span class="keyword">case</span> 1
0662         
0663         <span class="keyword">if</span> ~isempty(handles.results)
0664            
0665             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>)
0666                 
0667                 <span class="keyword">for</span> ll = 1 : length(handles.results.handGraphics.hOutBox)
0668                     
0669                     handles.results.handGraphics.hOutBox(ll).Visible = <span class="string">'on'</span>;
0670                 <span class="keyword">end</span>
0671             <span class="keyword">end</span>
0672         <span class="keyword">end</span>        
0673 <span class="keyword">end</span>
0674 
0675 <span class="keyword">if</span> ~isempty(handles.results)
0676 
0677     hold(handles.pltRes,<span class="string">'on'</span>)
0678 
0679     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0680             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0681             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0682             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0683             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0684             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0685 
0686             axis off
0687             box off
0688             grid off        
0689             legend HIDE
0690             set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0691 
0692     <span class="keyword">else</span>
0693 
0694          axis on   
0695          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0696          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0697     <span class="keyword">end</span>
0698 
0699     hold(handles.pltRes,<span class="string">'off'</span>)
0700 
0701 
0702     <span class="comment">% Update handles structure</span>
0703     guidata(hObject, handles);
0704 <span class="keyword">end</span>
0705 
0706 
0707 <span class="comment">% --- Executes on selection change in startPos.</span>
0708 <a name="_sub25" href="#_subfunctions" class="code">function startPos_Callback(hObject, eventdata, handles)</a>
0709 <span class="comment">% hObject    handle to startPos (see GCBO)</span>
0710 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0711 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0712 
0713 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns startPos contents as cell array</span>
0714 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from startPos</span>
0715 
0716 
0717 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0718 <a name="_sub26" href="#_subfunctions" class="code">function startPos_CreateFcn(hObject, eventdata, handles)</a>
0719 <span class="comment">% hObject    handle to startPos (see GCBO)</span>
0720 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0721 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0722 
0723 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0724 <span class="comment">%       See ISPC and COMPUTER.</span>
0725 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0726     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0727 <span class="keyword">end</span>
0728 
0729 
0730 <span class="comment">% --- Executes on button press in plotOGrid.</span>
0731 <a name="_sub27" href="#_subfunctions" class="code">function plotOGrid_Callback(hObject, eventdata, handles)</a>
0732 <span class="comment">% hObject    handle to plotOGrid (see GCBO)</span>
0733 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0734 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0735 
0736 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotOGrid</span>
0737 
0738 stat = get(handles.plotOGrid,<span class="string">'Value'</span>);
0739 
0740 <span class="keyword">switch</span>(stat)
0741     
0742     <span class="keyword">case</span> 0
0743         
0744         <span class="keyword">if</span> ~isempty(handles.results)
0745            
0746             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'on'</span>)
0747                 
0748                 handles.results.handGraphics.hGridBox.Visible = <span class="string">'off'</span>;
0749             <span class="keyword">end</span>
0750         <span class="keyword">end</span>
0751         
0752     <span class="keyword">case</span> 1
0753         
0754         <span class="keyword">if</span> ~isempty(handles.results)
0755            
0756             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>)
0757                 
0758                 handles.results.handGraphics.hGridBox.Visible = <span class="string">'on'</span>;
0759             <span class="keyword">end</span>
0760         <span class="keyword">end</span>        
0761 <span class="keyword">end</span>
0762 
0763 
0764 <span class="keyword">if</span> ~isempty(handles.results)
0765     
0766     hold(handles.pltRes,<span class="string">'on'</span>)
0767 
0768     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0769             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0770             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0771             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0772             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0773             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0774 
0775             axis off
0776             box off
0777             grid off        
0778             legend HIDE
0779     <span class="keyword">else</span>
0780 
0781          axis on   
0782          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0783          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0784          set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0785     <span class="keyword">end</span>
0786 
0787     hold(handles.pltRes,<span class="string">'off'</span>)
0788 
0789 
0790     <span class="comment">% Update handles structure</span>
0791     guidata(hObject, handles);
0792     
0793 <span class="keyword">end</span>
0794 
0795 
0796 
0797 <span class="comment">% --------------------------------------------------------------------</span>
0798 <a name="_sub28" href="#_subfunctions" class="code">function leg_ClickedCallback(hObject, eventdata, handles)</a>
0799 <span class="comment">% hObject    handle to leg (see GCBO)</span>
0800 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0801 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0802 
0803 stat = get(handles.leg,<span class="string">'State'</span>);
0804 
0805 <span class="keyword">switch</span>(stat)
0806     
0807     <span class="keyword">case</span> <span class="string">'off'</span>
0808     
0809         hold(handles.pltRes,<span class="string">'on'</span>)
0810         legend HIDE
0811         hold(handles.pltRes,<span class="string">'off'</span>)
0812         
0813     <span class="keyword">case</span> <span class="string">'on'</span>
0814         
0815         hold(handles.pltRes,<span class="string">'on'</span>)
0816         legend SHOW
0817         hold(handles.pltRes,<span class="string">'off'</span>)
0818         
0819 <span class="keyword">end</span>
0820 
0821 
0822 <span class="comment">% --- Executes on button press in resLog.</span>
0823 <a name="_sub29" href="#_subfunctions" class="code">function resLog_Callback(hObject, eventdata, handles)</a>
0824 <span class="comment">% hObject    handle to resLog (see GCBO)</span>
0825 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0826 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0827 [~, ~] = <a href="resetAll.html" class="code" title="function [ status, handles ] = resetAll( handles, varargin )">resetAll</a>(handles, 1);
0828 
0829 
0830 <span class="comment">% --- Executes on button press in logDump.</span>
0831 <a name="_sub30" href="#_subfunctions" class="code">function logDump_Callback(hObject, eventdata, handles)</a>
0832 <span class="comment">% hObject    handle to logDump (see GCBO)</span>
0833 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0834 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0835 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">'Busy...'</span>);
0836 pause(0.0005) 
0837 
0838 button = questdlg(<span class="string">'Are you sure?'</span>,<span class="string">'Dump log to .txt file'</span>);
0839 
0840 <span class="keyword">if</span> strcmp(button, <span class="string">'Yes'</span>)
0841     
0842     <a href="dumpToFile.html" class="code" title="function dumpToFile( log )">dumpToFile</a>( handles.logRes );
0843     
0844 <span class="keyword">end</span>
0845 set(handles.busyFlag,<span class="string">'String'</span>,<span class="string">''</span>);
0846 pause(0.0005) 
0847 
0848 
0849 
0850 <span class="comment">% --- Executes on button press in plotBBox.</span>
0851 <a name="_sub31" href="#_subfunctions" class="code">function plotBBox_Callback(hObject, eventdata, handles)</a>
0852 <span class="comment">% hObject    handle to plotBBox (see GCBO)</span>
0853 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0854 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0855 
0856 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of plotBBox</span>
0857 
0858 stat = get(handles.plotBBox,<span class="string">'Value'</span>);
0859 
0860 <span class="keyword">switch</span>(stat)
0861     
0862     <span class="keyword">case</span> 0
0863         
0864         <span class="keyword">if</span> ~isempty(handles.results)
0865            
0866             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'on'</span>)
0867                 
0868                 handles.results.handGraphics.hBBox.Visible = <span class="string">'off'</span>;
0869             <span class="keyword">end</span>
0870         <span class="keyword">end</span>
0871         
0872     <span class="keyword">case</span> 1
0873         
0874         <span class="keyword">if</span> ~isempty(handles.results)
0875            
0876             <span class="keyword">if</span> strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0877                 
0878                 handles.results.handGraphics.hBBox.Visible = <span class="string">'on'</span>;
0879             <span class="keyword">end</span>
0880         <span class="keyword">end</span>        
0881 <span class="keyword">end</span>
0882 
0883 <span class="keyword">if</span> ~isempty(handles.results)
0884     
0885     hold(handles.pltRes,<span class="string">'on'</span>)
0886 
0887     <span class="keyword">if</span> strcmp(handles.results.handGraphics.hOutBox(1).Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0888             strcmp(handles.results.handGraphics.hGridBox.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0889             strcmp(handles.results.handGraphics.hStart.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0890             strcmp(handles.results.handGraphics.hGrid.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0891             strcmp(handles.results.handGraphics.hPoly.Visible,<span class="string">'off'</span>) &amp;&amp; <span class="keyword">...</span>
0892             strcmp(handles.results.handGraphics.hBBox.Visible,<span class="string">'off'</span>)
0893 
0894             axis off
0895             box off
0896             grid off        
0897             legend HIDE
0898             set(handles.leg,<span class="string">'State'</span>, <span class="string">'off'</span>);
0899     <span class="keyword">else</span>
0900 
0901          axis on   
0902          handles.pltRes.XMinorGrid = <span class="string">'on'</span>;
0903          handles.pltRes.YMinorGrid = <span class="string">'on'</span>;
0904     <span class="keyword">end</span>
0905 
0906     hold(handles.pltRes,<span class="string">'off'</span>)
0907 
0908     <span class="comment">% Update handles structure</span>
0909     guidata(hObject, handles);
0910 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sat 25-Mar-2017 19:17:00 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>